<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Solar System Lab</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Montserrat', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #005AA7 0%, #FFFDE4 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 30px 0;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            color: #005AA7;
            text-shadow: 0 0 10px rgba(0, 90, 167, 0.2);
        }

        h2 {
            font-size: 2rem;
            margin: 25px 0 15px;
            color: #005AA7;
            border-bottom: 2px solid #005AA7;
            padding-bottom: 8px;
        }

        h3 {
            font-size: 1.5rem;
            margin: 20px 0 10px;
            color: #005AA7;
        }

        p {
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .card {
            background: #ffffff;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .main-content {
            display: flex;
            gap: 20px;
        }

        .left-column {
            flex: 1;
            min-width: 300px;
        }

        .right-column {
            flex: 1;
            min-width: 300px;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .feature {
            background: #e6f2ff;
            padding: 20px;
            border-radius: 10px;
            transition: transform 0.3s ease;
        }

        .feature:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 90, 167, 0.1);
        }

        .simulation-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }

        #simulation-canvas {
            background: #000;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 90, 167, 0.5);
            width: 100%;
            height: auto;
            aspect-ratio: 700 / 500;
            margin-bottom: 15px;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            width: 100%;
        }

        .control-group {
            background: #e6f2ff;
            padding: 15px;
            border-radius: 10px;
        }

        button {
            background-color: #005AA7;
            color: #fff;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            margin: 5px 0;
            transition: all 0.3s ease;
            width: 100%;
        }

        button:hover {
            background-color: #004a8e;
            box-shadow: 0 0 10px rgba(0, 90, 167, 0.5);
        }

        select, input {
            width: 100%;
            padding: 10px;
            margin: 8px 0;
            border-radius: 8px;
            background: #f0f8ff;
            color: #333;
            border: 1px solid #005AA7;
        }

        .experiment-steps {
            margin-top: 20px;
        }

        .step {
            margin-bottom: 15px;
            padding-left: 20px;
            position: relative;
        }

        .step:before {
            content: "▶";
            position: absolute;
            left: 0;
            color: #005AA7;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            border-top: 1px solid #ccc;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }

            h1 {
                font-size: 2.2rem;
            }

            h2 {
                font-size: 1.8rem;
            }

            .features-grid {
                grid-template-columns: 1fr;
            }

            .controls {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>My Solar System Simulation</h1>
            <p>Exploring Gravitational Forces and Orbital Mechanics</p>
        </header>

        <div class="main-content">
            <div class="left-column">
                <div class="card">
                    <h2>Simulation</h2>
                    <div class="simulation-container">
                        <canvas id="simulation-canvas" width="700" height="500"></canvas>
                        <div class="controls">
                            <div class="control-group">
                                <h3>System Presets</h3>
                                <select id="preset-select">
                                    <option value="sun-earth">Star-Planet System</option>
                                    <option value="sun-earth-moon">Star-Planet-Moon System</option>
                                    <option value="binary">Binary Star System</option>
                                    <option value="solar">Solar System</option>
                                    <option value="custom">Custom Setup</option>
                                </select>
                                <button id="btn-load-preset">Load Preset</button>
                            </div>
                            <div class="control-group">
                                <h3>Simulation Controls</h3>
                                <button id="btn-start">Start</button>
                                <button id="btn-pause">Pause</button>
                                <button id="btn-reset">Reset</button>
                                <button id="btn-clear">Clear All</button>
                            </div>
                            <div class="control-group">
                                <h3>Body Properties</h3>
                                <input type="range" id="mass-slider" min="1" max="100" value="10">
                                <label for="mass-slider">Mass: <span id="mass-value">10</span></label>
                                <button id="btn-add-body">Add Body</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="right-column">
                <div class="card">
                    <h2>Lab Experiment: Kepler's Laws</h2>
                    <p>This experiment will help you understand Kepler's Laws of Planetary Motion by observing and measuring orbital characteristics.</p>
                    
                    <h3>Objective</h3>
                    <p>To verify Kepler's three laws of planetary motion by creating and observing different orbital systems.</p>
                    
                    <div class="experiment-steps">
                        <h3>Procedure</h3>
                        <div class="step">Create a star with a mass of 100 units at the center of the simulation.</div>
                        <div class="step">Add a planet with a mass of 1 unit at a distance of 150 pixels from the star.</div>
                        <div class="step">Give the planet an initial velocity perpendicular to the line connecting it to the star.</div>
                        <div class="step">Run the simulation and observe the orbital path.</div>
                        <div class="step">Measure the orbital period and the semi-major axis of the orbit.</div>
                        <div class="step">Repeat with different initial velocities and distances.</div>
                        <div class="step">Create a binary star system and observe how both stars orbit around their common center of mass.</div>
                    </div>
                </div>

                <div class="card">
                    <h2>Physics Principles Demonstrated</h2>
                    <div class="features-grid">
                        <div class="feature">
                            <h3>Newton's Law of Universal Gravitation</h3>
                            <p>F = G(m₁m₂)/r² where F is the gravitational force, G is the gravitational constant, m₁ and m₂ are masses, and r is the distance between centers.</p>
                        </div>
                        <div class="feature">
                            <h3>Conservation of Momentum</h3>
                            <p>The total momentum of the system remains constant unless acted upon by an external force.</p>
                        </div>
                        <div class="feature">
                            <h3>Kepler's Laws of Planetary Motion</h3>
                            <p>1. Elliptical orbits with the central body at one focus<br>
                                2. Equal areas swept in equal times<br>
                                3. T² ∝ a³ (orbital period squared proportional to semi-major axis cubed)</p>
                        </div>
                        <div class="feature">
                            <h3>Center of Mass</h3>
                            <p>In multi-body systems, all bodies orbit around the common center of mass of the system.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>This interactive lab is a physics simulation based on orbital mechanics.</p>
        </footer>
    </div>

    <script>
        const canvas = document.getElementById('simulation-canvas');
        const ctx = canvas.getContext('2d');
        
        let bodies = [];
        let running = false;
        let animationId = null;
        let timeStep = 1; 
        const G = 0.005; 
        
        class Body {
            constructor(x, y, vx, vy, mass, color) {
                this.x = x;
                this.y = y;
                this.vx = vx;
                this.vy = vy;
                this.mass = mass;
                this.color = color;
                this.radius = Math.max(1, Math.log(mass) * 2); 
                this.trail = [];
                this.maxTrailLength = 500;
                this.ax = 0;
                this.ay = 0;
            }
        
            draw() {
                if (this.trail.length > 1) {
                    ctx.beginPath();
                    ctx.strokeStyle = this.color + '60';
                    ctx.moveTo(this.trail[0].x, this.trail[0].y);
                    for (let i = 1; i < this.trail.length; i++) {
                        ctx.lineTo(this.trail[i].x, this.trail[i].y);
                    }
                    ctx.stroke();
                }
        
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.fill();
        
                if (this.mass > 1) { 
                    ctx.beginPath();
                    ctx.moveTo(this.x, this.y);
                    ctx.lineTo(this.x + this.vx * 15, this.y + this.vy * 15);
                    ctx.strokeStyle = '#aaff00'; 
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }
            }
        
            update(dt) {
                this.vx += this.ax * dt;
                this.vy += this.ay * dt;
                this.x += this.vx * dt;
                this.y += this.vy * dt;
        
                this.trail.push({x: this.x, y: this.y});
                if (this.trail.length > this.maxTrailLength) {
                    this.trail.shift();
                }
            }
        
            calculateAcceleration(allBodies) {
                this.ax = 0;
                this.ay = 0;
        
                for (const body of allBodies) {
                    if (body === this) continue;
        
                    const dx = body.x - this.x;
                    const dy = body.y - this.y;
                    const distanceSquared = dx * dx + dy * dy;
                    const distance = Math.sqrt(distanceSquared);
                    
                    if (distance > this.radius + body.radius) {
                        const forceMagnitude = G * body.mass / distanceSquared;
                        this.ax += forceMagnitude * dx / distance;
                        this.ay += forceMagnitude * dy / distance;
                    }
                }
            }
        
            drawOrbitPath(centerBody) {
                const cx = centerBody.x;
                const cy = centerBody.y;
                
                const rx = this.x - cx;
                const ry = this.y - cy;
                const r = Math.sqrt(rx * rx + ry * ry);
                const v = Math.sqrt(this.vx * this.vx + this.vy * this.vy);
                
                const mu = G * (this.mass + centerBody.mass); 
                const h = (rx * this.vy - ry * this.vx); 
                
                const eX = ((v*v - mu/r) * rx - (rx*this.vx + ry*this.vy) * this.vx) / mu;
                const eY = ((v*v - mu/r) * ry - (rx*this.vx + ry*this.vy) * this.vy) / mu;
                const eccentricity = Math.sqrt(eX*eX + eY*eY);
                
                if (eccentricity >= 1) { 
                    return;
                }
                
                const semiMajorAxis = h*h / (mu * (1 - eccentricity*eccentricity));
                const focusX = cx + semiMajorAxis * eX;
                const focusY = cy + semiMajorAxis * eY;
        
                const a = semiMajorAxis;
                const b = semiMajorAxis * Math.sqrt(1 - eccentricity*eccentricity);
        
                ctx.beginPath();
                ctx.strokeStyle = '#ff9ff3';
                ctx.lineWidth = 2;
        
                const angleOffset = Math.atan2(eY, eX);
                
                for (let i = 0; i <= 360; i++) {
                    const angle = (i * Math.PI / 180) + angleOffset;
                    const x = focusX + a * Math.cos(angle);
                    const y = focusY + b * Math.sin(angle);
        
                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                }
                ctx.closePath();
                ctx.stroke();
            }
        }
        
        function initSimulation() {
            bodies = [
                new Body(canvas.width/2, canvas.height/2, 0, 0, 2000, '#ffaa00'), 
                new Body(canvas.width/2 + 200, canvas.height/2, 0, 2, 10, '#005AA7'), 
            ];
        }
        
        function loadPreset(preset) {
            bodies = [];
            running = false;
            cancelAnimationFrame(animationId);
            
            if (preset === 'sun-earth') {
                bodies.push(new Body(canvas.width / 2, canvas.height / 2, 0, 0, 2000, '#ffaa00'));
                bodies.push(new Body(canvas.width / 2 + 200, canvas.height / 2, 0, 2.0, 10, '#005AA7'));
            } else if (preset === 'sun-earth-moon') {
                bodies.push(new Body(canvas.width / 2, canvas.height / 2, 0, 0, 2000, '#ffaa00'));
                bodies.push(new Body(canvas.width / 2 + 200, canvas.height / 2, 0, 2.0, 10, '#005AA7'));
                const earth = bodies[1];
                bodies.push(new Body(earth.x + 30, earth.y, earth.vx, earth.vy + 1.2, 0.1, '#cccccc'));
            } else if (preset === 'binary') {
                bodies.push(new Body(canvas.width / 2 - 100, canvas.height / 2, 0, 1.5, 1000, '#ffaa00'));
                bodies.push(new Body(canvas.width / 2 + 100, canvas.height / 2, 0, -1.5, 1000, '#005AA7'));
            } else if (preset === 'solar') {
                bodies.push(new Body(canvas.width / 2, canvas.height / 2, 0, 0, 2000, '#ffaa00'));
                bodies.push(new Body(canvas.width / 2 + 100, canvas.height / 2, 0, 2.8, 0.5, '#888888'));
                bodies.push(new Body(canvas.width / 2 + 150, canvas.height / 2, 0, 2.4, 1, '#ff6b6b'));
                bodies.push(new Body(canvas.width / 2 + 200, canvas.height / 2, 0, 2.0, 10, '#005AA7'));
            } else if (preset === 'custom') {
                bodies = [];
            }
        }
        
        function animate() {
            if (!running) return;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawStars();
        
            for (const body of bodies) {
                body.calculateAcceleration(bodies);
            }
            
            for (const body of bodies) {
                body.update(timeStep);
                body.draw();
            }
            
            if (bodies.length === 2 && bodies[0].mass > bodies[1].mass) {
                bodies[1].drawOrbitPath(bodies[0]);
            }
            
            animationId = requestAnimationFrame(animate);
        }
        
        function drawStars() {
            for (let i = 0; i < 100; i++) {
                ctx.beginPath();
                ctx.arc(
                    Math.random() * canvas.width,
                    Math.random() * canvas.height,
                    Math.random() * 1.5,
                    0, Math.PI * 2
                );
                ctx.fillStyle = 'rgba(100, 100, 100, 0.7)'; 
                ctx.fill();
            }
        }
        
        document.getElementById('btn-start').addEventListener('click', () => {
            running = true;
            animate();
        });
        
        document.getElementById('btn-pause').addEventListener('click', () => {
            running = false;
            cancelAnimationFrame(animationId);
        });
        
        document.getElementById('btn-reset').addEventListener('click', () => {
            loadPreset('sun-earth');
        });
        
        document.getElementById('btn-clear').addEventListener('click', () => {
            running = false;
            cancelAnimationFrame(animationId);
            bodies = [];
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        });
        
        document.getElementById('btn-add-body').addEventListener('click', () => {
            const mass = parseInt(document.getElementById('mass-slider').value);
            const colors = ['#005AA7', '#A7005A', '#A75A00', '#5A00A7', '#00A75A'];
            const color = colors[Math.floor(Math.random() * colors.length)];
            
            const angle = Math.random() * Math.PI * 2;
            const distance = 100 + Math.random() * 150;
            const orbitalSpeed = Math.sqrt((G * bodies[0].mass) / distance); 
            
            bodies.push(new Body(
                canvas.width/2 + Math.cos(angle) * distance,
                canvas.height/2 + Math.sin(angle) * distance,
                -Math.sin(angle) * orbitalSpeed,
                Math.cos(angle) * orbitalSpeed,
                mass,
                color
            ));
        });
        
        document.getElementById('mass-slider').addEventListener('input', (e) => {
            document.getElementById('mass-value').textContent = e.target.value;
        });
        
        document.getElementById('btn-load-preset').addEventListener('click', () => {
            loadPreset(document.getElementById('preset-select').value);
        });
        
        loadPreset('sun-earth');
    </script>
</body>
</html>